<template>
  <div>
    <h1>{{ header.title }}</h1>
    <p>{{ header.subtitle }}</p>
    <Button variant="primary">{{ header.buttonTitle }}</Button>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <LazyImage
      :alt="header.image.responsiveImage.alt"
      :src="header.image.blurUpThumb"
      :data-lazy-src="header.image.responsiveImage.src"
    ></LazyImage>
    <!--      :srcset="header.image.responsiveImage.webpSrcSet"-->
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid aut
      beatae corporis, ex, incidunt iusto, maxime minus molestias mollitia natus
      nesciunt nihil perspiciatis quis repellendus sapiente sunt veniam
      voluptatibus voluptatum! Lorem ipsum dolor sit amet, consectetur
      adipisicing elit. Assumenda distinctio fugit magnam nemo quasi repellat.
      Adipisci animi in natus quaerat sed? Assumenda dicta dignissimos est iste
      modi, recusandae temporibus veritatis.
    </p>
  </div>
</template>

<script>
import { request } from '~/datocms';
import { HEADER_QUERY } from '~/graphql';

export default {
  components: {
    LazyImage: () => import('~/components/LazyImage.vue'),
  },
  asyncData() {
    return new Promise((resolve, reject) => {
      request({
        query: HEADER_QUERY,
      })
        .then((data) => resolve(data))
        .catch((err) => reject(err));
    });
  },
  data() {
    return {
      header: {
        image: {
          responsiveImage: {
            alt: '',
            src: '',
            webpSrcSet: '',
            base64: '',
          },
          blurUpThumb: '',
        },
      },
    };
  },
  mounted() {
    let options = {
      root: null,
      rootMargin: '50px',
      threshold: 0.1,
    };

    const obsCallback = function (entries, observer) {
      entries.forEach((entry) => {
        console.log(entry);
        entry.target.src = entry.target.dataset.lazySrc;
      });
    };

    let observer = new IntersectionObserver(obsCallback, options);
    document.querySelectorAll('img.lazy-img').forEach((el) => {
      observer.observe(el);
    });
  },
};
</script>
